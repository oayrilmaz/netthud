<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Net Thud — Goal Intelligence</title>
  <meta name="description" content="Football intelligence at the moment it matters. League-first. Signal-driven. No noise." />

  <!-- Open Graph -->
  <meta property="og:title" content="Net Thud — Goal Intelligence" />
  <meta property="og:description" content="Football intelligence at the moment it matters. League-first. Signal-driven. No noise." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://netthud.com/" />
  <meta property="og:image" content="https://netthud.com/og.png" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Net Thud — Goal Intelligence" />
  <meta name="twitter:description" content="Football intelligence at the moment it matters." />

  <style>
    :root{
      --bg:#07090b;
      --card: rgba(255,255,255,.04);
      --card2: rgba(255,255,255,.03);
      --stroke: rgba(255,255,255,.10);
      --text:#e9eef2;
      --muted:#aab6c3;
      --muted2:#83909d;

      --accent:#78ff6a;
      --accent2:#39d9ff;
      --warn:#ffd35a;

      --radius:18px;
      --shadow: 0 20px 60px rgba(0,0,0,.50);
      --shadow2: 0 10px 30px rgba(0,0,0,.45);

      --container: 1120px;
      --ease: cubic-bezier(.2,.9,.2,1);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1100px 650px at 18% 18%, rgba(120,255,106,.10), transparent 55%),
        radial-gradient(900px 620px at 78% 24%, rgba(57,217,255,.09), transparent 55%),
        linear-gradient(180deg, #06080a, #070a0d 55%, #07090b);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      letter-spacing:-0.01em;
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    a:hover{opacity:.95}
    .container{max-width:var(--container); margin:0 auto; padding:0 22px}

    /* ---------- Header / Nav (simpler) ---------- */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(12px);
      background: rgba(7,9,11,.55);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .navwrap{
      display:flex; align-items:center; justify-content:space-between;
      height:72px;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      min-width: 220px;
    }
    .logo{
      width:36px; height:36px; border-radius:12px;
      background:
        radial-gradient(12px 12px at 25% 25%, rgba(120,255,106,.95), transparent 60%),
        radial-gradient(18px 18px at 70% 35%, rgba(57,217,255,.85), transparent 62%),
        radial-gradient(22px 22px at 55% 75%, rgba(120,255,106,.55), transparent 65%),
        linear-gradient(145deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);
      box-shadow: 0 10px 25px rgba(0,0,0,.35);
    }
    .brandTitle{
      display:flex; flex-direction:column; gap:3px;
      line-height:1.05;
    }
    .brandTitle strong{
      font-size:13px;
      letter-spacing:.14em;
      text-transform:uppercase;
    }
    .brandTitle span{
      font-size:12px;
      color: var(--muted2);
      font-weight:700;
      letter-spacing:0;
    }

    nav{display:flex; align-items:center; gap:8px;}
    .navlink{
      padding:10px 12px;
      border-radius:999px;
      color: var(--muted);
      border:1px solid transparent;
      font-weight:800;
      font-size:13px;
      transition: background .15s var(--ease), border-color .15s var(--ease), color .15s var(--ease), transform .15s var(--ease);
    }
    .navlink:hover{
      background: rgba(255,255,255,.04);
      border-color: rgba(255,255,255,.06);
      color: var(--text);
      transform: translateY(-1px);
    }
    .navlink.active{
      background: rgba(120,255,106,.12);
      border-color: rgba(120,255,106,.20);
      color: var(--text);
    }

    .actions{
      display:flex; align-items:center; gap:10px;
      min-width:220px; justify-content:flex-end;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-weight:900;
      font-size:12px;
      white-space:nowrap;
      transition: transform .15s var(--ease), border-color .15s var(--ease), background .15s var(--ease), color .15s var(--ease);
      user-select:none;
    }
    .pill:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.045);
      color: var(--text);
    }
    .dot{width:8px; height:8px; border-radius:999px; background: var(--accent); box-shadow: 0 0 14px rgba(120,255,106,.45);}

    .soundToggle{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-weight:1000;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      transition: transform .15s var(--ease), border-color .15s var(--ease), background .15s var(--ease), color .15s var(--ease);
      white-space:nowrap;
    }
    .soundToggle:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.045);
      color: var(--text);
    }
    .soundToggle .sDot{width:8px; height:8px; border-radius:999px; background: var(--accent); box-shadow: 0 0 12px rgba(120,255,106,.40);}
    .soundToggle.off{opacity:.78}
    .soundToggle.off .sDot{background: rgba(255,255,255,.28); box-shadow:none}

    .burger{display:none}
    .mobileNav{display:none}

    @media (max-width: 980px){
      nav{display:none}
      .actions{display:none}
      .burger{
        display:inline-flex;
        align-items:center; justify-content:center;
        width:44px; height:44px;
        border-radius:14px;
        border:1px solid rgba(255,255,255,.10);
        background: rgba(255,255,255,.03);
      }
      .mobileNav{
        display:none;
        border-top:1px solid rgba(255,255,255,.06);
        padding:12px 0 16px;
      }
      .mobileNav.show{display:block}
      .mobileNav .row{display:flex; flex-wrap:wrap; gap:10px;}
      .mobileNav .navlink{background: rgba(255,255,255,.03); border-color: rgba(255,255,255,.07)}
    }

    /* ---------- Layout (relaxed spacing) ---------- */
    main{padding: 34px 0 70px;}
    section{padding: 40px 0 0; scroll-margin-top: 96px;}

    .hero{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:22px;
      align-items:start;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr}
    }

    .card{
      border:1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardInner{padding: 26px 26px 24px;}
    .soft{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
    }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      color: rgba(120,255,106,.88);
      font-weight:1000;
      font-size:12px;
      letter-spacing:.16em;
      text-transform:uppercase;
    }
    .kicker .line{width:34px; height:1px; background: rgba(120,255,106,.55); box-shadow:0 0 14px rgba(120,255,106,.30);}

    h1{
      margin: 14px 0 10px;
      font-size: 44px;
      line-height:1.08;
      letter-spacing:-0.03em;
    }
    @media (max-width:980px){ h1{font-size:38px} }

    .lead{
      margin:0;
      color: var(--muted);
      font-size:16px;
      line-height:1.7;
      font-weight:650;
      max-width: 65ch;
    }

    .ctaRow{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-top:18px;
    }
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 14px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.035);
      font-weight:1000;
      font-size:13px;
      transition: transform .15s var(--ease), border-color .15s var(--ease), background .15s var(--ease);
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.16); background: rgba(255,255,255,.05);}
    .btnPrimary{
      border-color: rgba(120,255,106,.26);
      background: rgba(120,255,106,.14);
    }
    .btnPrimary:hover{border-color: rgba(120,255,106,.40); background: rgba(120,255,106,.18);}

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:22px;
      align-items:start;
    }
    @media (max-width: 980px){ .grid2{grid-template-columns:1fr} }

    .sectionTitle{
      display:flex; align-items:baseline; justify-content:space-between; gap:12px;
      margin:0 0 14px;
      padding: 0 2px;
    }
    .sectionTitle h2{
      margin:0;
      font-size:14px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: rgba(233,238,242,.90);
    }
    .hint{
      color: var(--muted2);
      font-size:12px;
      font-weight:800;
    }

    /* ---------- Lists ---------- */
    .list{
      display:grid;
      gap:12px;
      padding: 18px;
    }
    .item{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
      border-radius: 16px;
      padding: 14px 14px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
    }
    .item strong{display:block; font-size:14px;}
    .item p{
      margin:6px 0 0;
      color: var(--muted2);
      font-weight:700;
      font-size:13px;
      line-height:1.55;
    }

    .tag{
      display:inline-flex; align-items:center; justify-content:center;
      padding:7px 10px;
      min-width:64px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-weight:1000;
      font-size:11px;
      letter-spacing:.08em;
      text-transform:uppercase;
      white-space:nowrap;
      flex: 0 0 auto;
    }
    .tag.live{border-color: rgba(120,255,106,.26); color: rgba(120,255,106,.95); background: rgba(120,255,106,.08);}
    .tag.model{border-color: rgba(57,217,255,.25); color: rgba(57,217,255,.92); background: rgba(57,217,255,.07);}
    .tag.track{border-color: rgba(255,211,90,.20); color: rgba(255,211,90,.92); background: rgba(255,211,90,.06);}
    .tag.error{border-color: rgba(255,211,90,.30); color: rgba(255,211,90,.95); background: rgba(255,211,90,.08);}

    /* ---------- League chips ---------- */
    .chips{display:flex; flex-wrap:wrap; gap:10px; padding: 18px;}
    .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
      color: var(--text);
      font-weight:950;
      font-size:12px;
    }
    .miniDot{width:8px; height:8px; border-radius:999px; background: rgba(120,255,106,.9); box-shadow: 0 0 12px rgba(120,255,106,.40);}

    /* ---------- Footer ---------- */
    footer{
      margin-top: 56px;
      padding-top: 18px;
      border-top:1px solid rgba(255,255,255,.06);
      color: var(--muted2);
      font-size:12px;
      font-weight:700;
      display:flex; gap:12px; justify-content:space-between; flex-wrap:wrap;
    }
    footer strong{color: var(--text);}

  </style>
</head>

<body>
  <header>
    <div class="container">
      <div class="navwrap">
        <a class="brand" href="#home" aria-label="Net Thud Home">
          <div class="logo" aria-hidden="true"></div>
          <div class="brandTitle">
            <strong>NET THUD</strong>
            <span>Goal Intelligence</span>
          </div>
        </a>

        <nav aria-label="Primary navigation">
          <a class="navlink active" href="#home">Home</a>
          <a class="navlink" href="#news">AI News</a>
          <a class="navlink" href="#leagues">Leagues</a>
          <a class="navlink" href="#signals">Signals</a>
          <a class="navlink" href="#about">About</a>
        </nav>

        <div class="actions">
          <button id="soundToggle" class="soundToggle" type="button" aria-pressed="true" title="Toggle sound">
            <span class="sDot" aria-hidden="true"></span>
            <span id="soundLabel">Sound: ON</span>
          </button>
          <a class="pill" href="#news"><span class="dot"></span> AI updates</a>
        </div>

        <button class="burger" id="burger" aria-label="Open menu" aria-expanded="false">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="mobileNav" id="mobileNav">
        <div class="row" aria-label="Mobile navigation">
          <a class="navlink active" href="#home">Home</a>
          <a class="navlink" href="#news">AI News</a>
          <a class="navlink" href="#leagues">Leagues</a>
          <a class="navlink" href="#signals">Signals</a>
          <a class="navlink" href="#about">About</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container" id="home">
    <!-- HERO (clean / relaxed) -->
    <div class="hero">
      <div class="card">
        <div class="cardInner">
          <div class="kicker"><span class="line"></span> FOOTBALL INTELLIGENCE</div>
          <h1>At the moment it matters.</h1>
          <p class="lead">
            Net Thud highlights the decisive seconds — when goals flip matches, tables, and seasons.
            <strong>League-first.</strong> <strong>Signal-driven.</strong> No noise.
          </p>

          <div class="ctaRow">
            <a class="btn btnPrimary" href="#news">Open AI news</a>
            <a class="btn" href="#leagues">Browse leagues</a>
            <a class="btn" href="#signals">See signals</a>
          </div>
        </div>
      </div>

      <div class="soft">
        <div class="cardInner" style="padding:22px 22px 20px">
          <div class="sectionTitle" style="margin:0 0 10px">
            <h2>Signal Board</h2>
            <span class="hint">lightweight v0.1</span>
          </div>
          <div id="miniSignals" class="list" style="padding:0; gap:10px"></div>
          <div style="height:12px"></div>
          <a class="pill" href="#signals" style="width:100%; justify-content:center;">Open signals →</a>
        </div>
      </div>
    </div>

    <!-- AI NEWS -->
    <section id="news" aria-label="AI News">
      <div class="sectionTitle">
        <h2>AI News</h2>
        <span class="hint" id="newsMeta">loading…</span>
      </div>

      <div class="soft">
        <div class="list" id="newsList">
          <div class="item">
            <div>
              <strong>Loading AI news…</strong>
              <p>Fetching <code>assets/data/ai-news.json</code> from GitHub Pages.</p>
            </div>
            <span class="tag live">LIVE</span>
          </div>
        </div>
      </div>
    </section>

    <!-- LEAGUES -->
    <section id="leagues" aria-label="Top leagues">
      <div class="sectionTitle">
        <h2>Leagues</h2>
        <span class="hint">20 tracked</span>
      </div>

      <div class="soft">
        <div class="chips" id="leagueChips"></div>
      </div>
    </section>

    <!-- SIGNALS -->
    <section id="signals" aria-label="Signals">
      <div class="sectionTitle">
        <h2>Today’s Signals</h2>
        <span class="hint">starter set</span>
      </div>

      <div class="grid2">
        <div class="soft">
          <div class="list" id="signalsList"></div>
        </div>
        <div class="soft">
          <div class="list" id="signalsList2"></div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" aria-label="About Net Thud">
      <div class="sectionTitle">
        <h2>About</h2>
        <span class="hint">signal-driven</span>
      </div>

      <div class="soft">
        <div class="cardInner">
          <p class="lead" style="margin:0; font-size:15px">
            Net Thud is a football intelligence layer focused on decisive moments — not endless noise.
            We publish league-aware signals that explain match outcomes instead of recycling generic highlights.
          </p>

          <div style="height:16px"></div>

          <div class="item" style="margin:0; padding:16px">
            <div>
              <strong>Contact</strong>
              <p>
                Want to collaborate, sponsor a league dashboard, or contribute data sources?
                DM on X: <strong><a href="https://x.com/netthudpro" target="_blank" rel="noopener noreferrer">@netthudpro</a></strong>
              </p>
            </div>
            <span class="tag model">X</span>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div>© <span id="year"></span> <strong>Net Thud</strong> • Goal Intelligence</div>
      <div>league-first • signal-driven • no noise</div>
    </footer>
  </main>

  <!-- Audio (must exist as real mp3 files) -->
  <audio id="sfxThud" preload="auto" src="assets/audio/netthud.mp3"></audio>
  <audio id="sfxCrowd" preload="auto" src="assets/audio/Crowd.mp3"></audio>

  <script>
    const $ = (s, el=document) => el.querySelector(s);
    const $$ = (s, el=document) => Array.from(el.querySelectorAll(s));

    // ---------------------------
    // Mobile nav
    // ---------------------------
    const burger = $("#burger");
    const mobileNav = $("#mobileNav");
    if (burger && mobileNav) {
      burger.addEventListener("click", () => {
        const open = mobileNav.classList.toggle("show");
        burger.setAttribute("aria-expanded", open ? "true" : "false");
      });
      $$("#mobileNav a").forEach(a => a.addEventListener("click", () => {
        mobileNav.classList.remove("show");
        burger.setAttribute("aria-expanded", "false");
      }));
    }

    // ---------------------------
    // Active nav (non-sticky)
    // ---------------------------
    const navLinks = $$("nav .navlink");
    const navLinksMobile = $$("#mobileNav .navlink");

    function setActive(hash){
      const all = [...navLinks, ...navLinksMobile];
      all.forEach(l => l.classList.remove("active"));
      all.forEach(l => { if (l.getAttribute("href") === hash) l.classList.add("active"); });
    }

    $$('a[href^="#"]').forEach(a => {
      a.addEventListener("click", (e) => {
        const id = a.getAttribute("href");
        if (!id || id === "#") return;
        const target = document.querySelector(id);
        if (!target) return;

        e.preventDefault();
        setActive(id);
        target.scrollIntoView({behavior:"smooth", block:"start"});
        history.pushState(null, "", id);
      });
    });

    const sectionIds = ["home","news","leagues","signals","about"];
    const sectionEls = sectionIds.map(id => document.getElementById(id)).filter(Boolean);

    function getActiveSectionId(){
      const offset = 110;
      let best = null;
      let bestDist = Infinity;

      for (const el of sectionEls){
        const r = el.getBoundingClientRect();
        const dist = Math.abs(r.top - offset);
        const penalty = (r.bottom < offset) ? 99999 : 0;
        const score = dist + penalty;
        if (score < bestDist){ bestDist = score; best = el; }
      }
      return best ? ("#" + best.id) : "#home";
    }

    let ticking = false;
    function onScroll(){
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(() => {
        setActive(getActiveSectionId());
        ticking = false;
      });
    }
    window.addEventListener("scroll", onScroll, {passive:true});
    window.addEventListener("resize", onScroll);

    // ---------------------------
    // Static lists (starter)
    // ---------------------------
    const leagues = [
      "Premier League","La Liga","Serie A","Bundesliga","Ligue 1",
      "Eredivisie","Primeira Liga","Süper Lig","MLS","Brasileirão",
      "Argentine Primera","J1 League","Saudi Pro League","Belgian Pro League","Scottish Premiership",
      "Austrian Bundesliga","Swiss Super League","Danish Superliga","Norwegian Eliteserien","Swedish Allsvenskan"
    ];

    const signals = [
      {title:"Late Goal Heat", desc:"Leagues with the highest 75+ minute volatility today.", tag:"LIVE", kind:"live"},
      {title:"First Goal Impact", desc:"Where the opening goal most often decides the match.", tag:"MODEL", kind:"model"},
      {title:"Momentum Shifts", desc:"Goal timing and response — who collapses, who resets, who strikes again.", tag:"TRACK", kind:"track"},
    ];

    function renderSignals(containerId, list){
      const el = document.getElementById(containerId);
      if (!el) return;
      el.innerHTML = "";
      list.forEach(s => {
        const row = document.createElement("div");
        row.className = "item";
        row.innerHTML = `
          <div>
            <strong>${s.title}</strong>
            <p>${s.desc}</p>
          </div>
          <span class="tag ${s.kind}">${s.tag}</span>
        `;
        el.appendChild(row);
      });
    }

    function renderMiniSignals(){
      const el = document.getElementById("miniSignals");
      if (!el) return;
      el.innerHTML = "";
      signals.forEach(s => {
        const row = document.createElement("div");
        row.className = "item";
        row.innerHTML = `
          <div>
            <strong>${s.title}</strong>
            <p>${s.desc}</p>
          </div>
          <span class="tag ${s.kind}">${s.tag}</span>
        `;
        el.appendChild(row);
      });
    }

    function renderLeagues(){
      const el = document.getElementById("leagueChips");
      if (!el) return;
      el.innerHTML = "";
      leagues.forEach(name => {
        const chip = document.createElement("div");
        chip.className = "chip";
        chip.innerHTML = `<span class="miniDot"></span>${name}`;
        el.appendChild(chip);
      });
    }

    renderSignals("signalsList", signals);
    renderSignals("signalsList2", signals);
    renderMiniSignals();
    renderLeagues();

    // Footer year
    const year = document.getElementById("year");
    if (year) year.textContent = new Date().getFullYear();

    // Initial active state
    setActive(location.hash && document.querySelector(location.hash) ? location.hash : "#home");
    onScroll();

    // ---------------------------
    // AI NEWS (GitHub Pages JSON)
    // You created: assets/data/ai-news.json
    // ---------------------------
    const NEWS_URL = "assets/data/ai-news.json"; // IMPORTANT: matches your repo path
    const newsList = document.getElementById("newsList");
    const newsMeta = document.getElementById("newsMeta");

    function safeText(v){ return (v ?? "").toString(); }

    function renderNews(items, meta){
      if (!newsList) return;
      newsList.innerHTML = "";

      if (!Array.isArray(items) || items.length === 0){
        newsList.innerHTML = `
          <div class="item">
            <div>
              <strong>No AI news yet</strong>
              <p>Add items into <code>${NEWS_URL}</code>.</p>
            </div>
            <span class="tag track">EMPTY</span>
          </div>
        `;
        if (newsMeta) newsMeta.textContent = "0 items";
        return;
      }

      items.slice(0, 12).forEach(n => {
        const title = safeText(n.title || n.headline || "Update");
        const desc = safeText(n.summary || n.desc || n.description || "");
        const url  = safeText(n.url || n.link || "");
        const src  = safeText(n.source || "");
        const time = safeText(n.time || n.published || n.date || "");

        const subtitleParts = [src, time].filter(Boolean).join(" • ");
        const subtitle = subtitleParts ? subtitleParts : "Net Thud AI feed";

        const row = document.createElement("div");
        row.className = "item";
        row.innerHTML = `
          <div>
            <strong>${title}</strong>
            <p>${desc ? desc : subtitle}</p>
            ${url ? `<p style="margin-top:10px"><a class="pill" href="${url}" target="_blank" rel="noopener noreferrer">Open source →</a></p>` : ``}
          </div>
          <span class="tag live">NEW</span>
        `;
        newsList.appendChild(row);
      });

      const count = Array.isArray(items) ? items.length : 0;
      const updated = meta?.updated || meta?.lastUpdated || meta?.generatedAt || "";
      if (newsMeta) newsMeta.textContent = updated ? `${count} items • updated ${updated}` : `${count} items`;
    }

    async function loadNews(){
      try{
        const res = await fetch(NEWS_URL, { cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();

        // Accept either:
        // 1) { meta:{...}, items:[...] }
        // 2) [ ... ]
        const items = Array.isArray(data) ? data : (data.items || data.news || data.articles || []);
        const meta  = Array.isArray(data) ? null : (data.meta || null);

        renderNews(items, meta);
      }catch(err){
        if (!newsList) return;
        newsList.innerHTML = `
          <div class="item">
            <div>
              <strong>AI news not loading</strong>
              <p>
                Check that <code>${NEWS_URL}</code> is committed to <strong>main</strong> and is accessible on your site.
                (Error: ${safeText(err.message)})
              </p>
            </div>
            <span class="tag error">ERROR</span>
          </div>
        `;
        if (newsMeta) newsMeta.textContent = "error";
      }
    }

    loadNews();
    // Optional: refresh every 60 seconds (still GitHub-backed, not true “live”)
    setInterval(loadNews, 60000);

    // ---------------------------
    // SOUND: play on first interaction
    // ---------------------------
    const thud = document.getElementById("sfxThud");
    const crowd = document.getElementById("sfxCrowd");
    const soundToggle = document.getElementById("soundToggle");
    const soundLabel = document.getElementById("soundLabel");

    let soundEnabled = true;
    let playedOnce = false;

    function stopAudio(){
      if (thud){ thud.pause(); thud.currentTime = 0; }
      if (crowd){ crowd.pause(); crowd.currentTime = 0; }
    }
    function setSoundUI(){
      if (!soundToggle) return;
      soundToggle.classList.toggle("off", !soundEnabled);
      soundToggle.setAttribute("aria-pressed", soundEnabled ? "true" : "false");
      if (soundLabel) soundLabel.textContent = soundEnabled ? "Sound: ON" : "Sound: OFF";
    }
    setSoundUI();

    async function playVibe(){
      if (!soundEnabled || playedOnce) return;
      if (!thud || !crowd) return;

      try{
        thud.volume = 0.82;
        crowd.volume = 0.55;

        thud.currentTime = 0;
        crowd.currentTime = 0;

        await thud.play();

        setTimeout(() => {
          crowd.play().catch(()=>{});
          setTimeout(() => {
            if (crowd){ crowd.pause(); crowd.currentTime = 0; }
          }, 2300);
        }, 180);

        playedOnce = true;
      }catch(e){
        playedOnce = false;
      }
    }

    ["pointerdown","touchstart","wheel","keydown"].forEach(evt => {
      window.addEventListener(evt, playVibe, { once:true, passive:true });
    });

    if (soundToggle){
      soundToggle.addEventListener("click", async () => {
        soundEnabled = !soundEnabled;
        setSoundUI();
        if (!soundEnabled) stopAudio();
        else await playVibe();
      });
    }

    document.addEventListener("visibilitychange", () => { if (document.hidden) stopAudio(); });
  </script>
</body>
</html>